<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Self Rolling Ball: Electronics</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo_2_150x149.png"/></td>
  <td id="projectalign">
   <div id="projectname">Self Rolling Ball<span id="projectnumber">&#160;Final</span>
   </div>
   <div id="projectbrief">Design and build of a structure, PCB, and software interface to create a robot which can be commanded direction and magnitude to roll at.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('electronics.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Electronics</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#electronicssection1">Schematic - Robot</a></li>
<li class="level1"><a href="#electronicssection2">PCB Layout - Robot</a></li>
<li class="level1"><a href="#electronicssection4">Schematic - Remote</a></li>
<li class="level1"><a href="#electronicssection5">PCB Layout - Remote</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="electronicssection1"></a>
Schematic - Robot</h1>
<p>The main board was designed to use a 2s1p battery that would output a nominal 7.4V. The selected drive and inertial motors can run off anywhere from 6-12V. In addition to this, the bluetooth module we used along with the camera both required a 5V operating voltage. Seeing as the F411 needs a constant 3.3V logic, we needed two separate regulators. We set up a switching 5V regulator with an inductor to get our 5V rail. This 5V rail powered the bluetooth module and the camera. Next, the 5V regulated voltage fed into the 3.3V linear regulator. The output of this regulator fed all the logic requirements of our circuit. The motors were all driven off of polarity protected, but unregulated battery voltage as we don't need an overly stable supply for our motors. In addition to the power considerations. we also used many forms of communication - all which functioned properly. Those were: data transfer over USB with Virtual Com Ports, UART, I2C, SPI, and timer channels. A serial wire debug interface was also provided to allow for easy code flashing and debugging. <img src="main1.png" alt="" class="inline"/>     <br  />
 <img src="main2.png" alt="" class="inline"/>     <br  />
</p>
<h1><a class="anchor" id="electronicssection2"></a>
PCB Layout - Robot</h1>
<p>The PCB in the above image goes by the name of “Main Board” in our design. This board has the F411 chip on it which helps run all the peripherals including Bluetooth, IMU, Camera, Wifi, Motors, and USB. This board lives inside of the robot and acts as the main controller of this design. This PCB communicates directly with the “Remote Board” PCB over Bluetooth to integrate user interactions with robot movement. The design and build of this board was almost entirely perfect for our application. We did not run into any issues in soldering, component selection, or design and the PCB worked perfectly out of the box. We initially planned for this board to have a 6-Axis IMU on it, however, after attaining more knowledge about IMUs, we realized we would need to use a 9-Axis IMU, thus, the imu pads were left unsoldered and the female pin headers for the SCL and SDA lines were connected to the BNO055 IMU instead. Going through the project we found a few changes we wanted to see made. Firstly, we wanted the inclusion of an on/off switch so we could remove power from the board when the battery was plugged in and it was not in use. The second change we wanted to see was better mounting hole placement. The mounting holes were placed after all the components were placed which forced them to be in odd locations. <br  />
 <img src="main_board.png" alt="" class="inline"/>     <br  />
</p>
<h1><a class="anchor" id="electronicssection4"></a>
Schematic - Remote</h1>
<p>For the remote board, we decided to run everything off a AA battery pack with 3 batteries in series, giving us a nominal voltage of 4.5V. Seeing as this circuit would draw low current, we figured the cleanest and easiest way to power was with the 3 AA batteries. With the black pill needing 5V to operate, we had to set up a boost converter to get the 4.5-&gt;5V. In addition to the power requirements, we created a female receptacle for the black pill so as to not have to "remake" the functionalities as we were only using this board to poll ADCs and read/toggle GPIOs. <br  />
 <img src="remote1.png" alt="" class="inline"/>     <br  />
</p>
<h1><a class="anchor" id="electronicssection5"></a>
PCB Layout - Remote</h1>
<p>The image above shows an image of our “Remote Board”. This board has female headers that will match the male headers of a Black Pill. In order to supply the Black Pill with the proper power, we used a battery pack with 3 AA batteries in series to get 4.5V. This supply was then sent through a boost regulator and boosted to 5V for the Black Pill. Again, there were no issues with this board and everything worked out of the box. We had two design changes we wanted to see for this board. Firstly, the board was over 4 inches in length which added an extra charge to our PCB order that could have been easily avoided with some rearranging of components. Secondly, when the black pill was plugged in, the USB-C adapter was too close to the battery pack which meant we would have to remove the Black Pill if we wanted to provide power over USB. <br  />
 <img src="remote_board.png" alt="" class="inline"/>     <br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
