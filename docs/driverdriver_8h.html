<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Self Rolling Ball: Inc/driverdriver.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo_2_150x149.png"/></td>
  <td id="projectalign">
   <div id="projectname">Self Rolling Ball<span id="projectnumber">&#160;Final</span>
   </div>
   <div id="projectbrief">Design and build of a structure, PCB, and software interface to create a robot which can be commanded direction and magnitude to roll at.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('driverdriver_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">driverdriver.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/_stdint.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;stm32f4xx.h&quot;</code><br />
</div>
<p><a href="driverdriver_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimu__struct.html">imu_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMU Control Header File for Function Prototypes.  <a href="structimu__struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae90b40ad60266ec67f04fe49bee0a3ef"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structimu__struct.html">imu_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#ae90b40ad60266ec67f04fe49bee0a3ef">imu_struct_t</a></td></tr>
<tr class="memdesc:ae90b40ad60266ec67f04fe49bee0a3ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMU Control Header File for Function Prototypes.  <br /></td></tr>
<tr class="separator:ae90b40ad60266ec67f04fe49bee0a3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3db5fd59cc392996e768c744235edd84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#a3db5fd59cc392996e768c744235edd84">data_capture</a> (<a class="el" href="driverdriver_8h.html#ae90b40ad60266ec67f04fe49bee0a3ef">imu_struct_t</a> main_imu, <a class="el" href="driverdriver_8h.html#ae90b40ad60266ec67f04fe49bee0a3ef">imu_struct_t</a> remote_imu)</td></tr>
<tr class="memdesc:a3db5fd59cc392996e768c744235edd84"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMU Driver class with all required functions.  <br /></td></tr>
<tr class="separator:a3db5fd59cc392996e768c744235edd84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ee83d41e48f22c4d2070a81769f655"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#a97ee83d41e48f22c4d2070a81769f655">data_saturation</a> ()</td></tr>
<tr class="memdesc:a97ee83d41e48f22c4d2070a81769f655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saturate IMU Data.  <br /></td></tr>
<tr class="separator:a97ee83d41e48f22c4d2070a81769f655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7efdda6986be0b9d55f9640910988484"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#a7efdda6986be0b9d55f9640910988484">target_calc</a> ()</td></tr>
<tr class="memdesc:a7efdda6986be0b9d55f9640910988484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Target Direction.  <br /></td></tr>
<tr class="separator:a7efdda6986be0b9d55f9640910988484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2810ca19423c42f2de068a18ea1286b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#a2810ca19423c42f2de068a18ea1286b9">orientation_calc</a> ()</td></tr>
<tr class="memdesc:a2810ca19423c42f2de068a18ea1286b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Orientation.  <br /></td></tr>
<tr class="separator:a2810ca19423c42f2de068a18ea1286b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f3bbacc575080a59fa96539d72922c2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#a8f3bbacc575080a59fa96539d72922c2">new_duty1</a> ()</td></tr>
<tr class="memdesc:a8f3bbacc575080a59fa96539d72922c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Motor 2 Duty Cycle.  <br /></td></tr>
<tr class="separator:a8f3bbacc575080a59fa96539d72922c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35178cc32e6ee25c05ba33161c91893"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#aa35178cc32e6ee25c05ba33161c91893">new_duty2</a> ()</td></tr>
<tr class="memdesc:aa35178cc32e6ee25c05ba33161c91893"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Motor 3 Duty Cycle.  <br /></td></tr>
<tr class="separator:aa35178cc32e6ee25c05ba33161c91893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf9d4b4c9ebb4fe9cd5f67e4b02bc82"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="driverdriver_8h.html#accf9d4b4c9ebb4fe9cd5f67e4b02bc82">new_duty3</a> ()</td></tr>
<tr class="memdesc:accf9d4b4c9ebb4fe9cd5f67e4b02bc82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Motor 4 Duty Cycle.  <br /></td></tr>
<tr class="separator:accf9d4b4c9ebb4fe9cd5f67e4b02bc82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae90b40ad60266ec67f04fe49bee0a3ef" name="ae90b40ad60266ec67f04fe49bee0a3ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae90b40ad60266ec67f04fe49bee0a3ef">&#9670;&#160;</a></span>imu_struct_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structimu__struct.html">imu_struct</a> <a class="el" href="driverdriver_8h.html#ae90b40ad60266ec67f04fe49bee0a3ef">imu_struct_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IMU Control Header File for Function Prototypes. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3db5fd59cc392996e768c744235edd84" name="a3db5fd59cc392996e768c744235edd84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db5fd59cc392996e768c744235edd84">&#9670;&#160;</a></span>data_capture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void data_capture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="driverdriver_8h.html#ae90b40ad60266ec67f04fe49bee0a3ef">imu_struct_t</a>&#160;</td>
          <td class="paramname"><em>main_imu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="driverdriver_8h.html#ae90b40ad60266ec67f04fe49bee0a3ef">imu_struct_t</a>&#160;</td>
          <td class="paramname"><em>remote_imu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IMU Driver class with all required functions. </p>
<p>This class will allow the user to interact the IMU on the robot with the IMU on the remote to allow for quick and intuitive feedback. Capture IMU Data</p>
<p>This function captures the data from both the main and remote IMUs to prevent inconsistent results due to fluctuating values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">main_imu</td><td>This is the imu struct defined in <a class="el" href="driverdriver_8h.html">driverdriver.h</a> for the main IMU </td></tr>
    <tr><td class="paramname">main_imu</td><td>This is the imu struct defined in <a class="el" href="driverdriver_8h.html">driverdriver.h</a> for the remote IMU </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>imu_struct_t is separately defined from imu_structs_t as seen in <a class="el" href="imu_8cpp.html">imu.cpp</a>. The structure passed here contains the yaw, pitch, and roll data that was collected using the imu_structs_t structure and class in <a class="el" href="imu_8cpp.html">imu.cpp</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00051">51</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> = main_imu.<a class="code hl_variable" href="structimu__struct.html#aaa77a2e5332601063719a183bbf26bb2">pitch</a>;</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a> = main_imu.<a class="code hl_variable" href="structimu__struct.html#aeea54f7cc807b1e675b5da21c92a5f92">roll</a>;</div>
<div class="line"><span class="lineno">   55</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a48bc73478db109996ea376fe8ca31746">main_yaw</a> = main_imu.<a class="code hl_variable" href="structimu__struct.html#a4299fb0ce3ae117d1d68155ea22cc595">yaw</a>;</div>
<div class="line"><span class="lineno">   56</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> = remote_imu.<a class="code hl_variable" href="structimu__struct.html#aaa77a2e5332601063719a183bbf26bb2">pitch</a>;</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a> = remote_imu.<a class="code hl_variable" href="structimu__struct.html#aeea54f7cc807b1e675b5da21c92a5f92">roll</a>;</div>
<div class="line"><span class="lineno">   58</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a6bd9481a550724104f5bc5aae6baa1cf">remote_yaw</a> = remote_imu.<a class="code hl_variable" href="structimu__struct.html#a4299fb0ce3ae117d1d68155ea22cc595">yaw</a>;</div>
<div class="line"><span class="lineno">   59</span>}</div>
<div class="ttc" id="adriverdriver_8cpp_html_a322b51758b86887c294daeba4e3eb9bd"><div class="ttname"><a href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a></div><div class="ttdeci">int32_t main_pitch</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00018">driverdriver.cpp:18</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a3e5a7dc3541a71e8a32c80359ce1eaaf"><div class="ttname"><a href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a></div><div class="ttdeci">int32_t main_roll</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00019">driverdriver.cpp:19</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a48bc73478db109996ea376fe8ca31746"><div class="ttname"><a href="driverdriver_8cpp.html#a48bc73478db109996ea376fe8ca31746">main_yaw</a></div><div class="ttdeci">int32_t main_yaw</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00020">driverdriver.cpp:20</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a6bd9481a550724104f5bc5aae6baa1cf"><div class="ttname"><a href="driverdriver_8cpp.html#a6bd9481a550724104f5bc5aae6baa1cf">remote_yaw</a></div><div class="ttdeci">int32_t remote_yaw</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00023">driverdriver.cpp:23</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a8b9e3b3b7cdeb864b40a399db6ea0950"><div class="ttname"><a href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a></div><div class="ttdeci">int32_t remote_pitch</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00021">driverdriver.cpp:21</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_ac7944dc6f211712611bc3f2ccd3ed0d9"><div class="ttname"><a href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a></div><div class="ttdeci">int32_t remote_roll</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00022">driverdriver.cpp:22</a></div></div>
<div class="ttc" id="astructimu__struct_html_a4299fb0ce3ae117d1d68155ea22cc595"><div class="ttname"><a href="structimu__struct.html#a4299fb0ce3ae117d1d68155ea22cc595">imu_struct::yaw</a></div><div class="ttdeci">int32_t yaw</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8h_source.html#l00026">driverdriver.h:26</a></div></div>
<div class="ttc" id="astructimu__struct_html_aaa77a2e5332601063719a183bbf26bb2"><div class="ttname"><a href="structimu__struct.html#aaa77a2e5332601063719a183bbf26bb2">imu_struct::pitch</a></div><div class="ttdeci">int32_t pitch</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8h_source.html#l00024">driverdriver.h:24</a></div></div>
<div class="ttc" id="astructimu__struct_html_aeea54f7cc807b1e675b5da21c92a5f92"><div class="ttname"><a href="structimu__struct.html#aeea54f7cc807b1e675b5da21c92a5f92">imu_struct::roll</a></div><div class="ttdeci">int32_t roll</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8h_source.html#l00025">driverdriver.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a97ee83d41e48f22c4d2070a81769f655" name="a97ee83d41e48f22c4d2070a81769f655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ee83d41e48f22c4d2070a81769f655">&#9670;&#160;</a></span>data_saturation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void data_saturation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saturate IMU Data. </p>
<p>This function saturates first the remote IMU data to a range of +-45 deg from a neutral position. This is done for ease of use by the user. The IMU on the robot is saturated to a range of +-60 deg to prevent over rotation and flipping. </p><dl class="section note"><dt>Note</dt><dd>This function should only be called after <a class="el" href="driverdriver_8cpp.html#a3db5fd59cc392996e768c744235edd84" title="IMU Driver class with all required functions.">data_capture()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00067">67</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">if</span> (remote_pitch &lt;= 135 &amp;&amp; remote_pitch &gt;= 0)  <span class="comment">// -135 -&gt; -180 = 180 -&gt; 135</span></div>
<div class="line"><span class="lineno">   70</span>    {</div>
<div class="line"><span class="lineno">   71</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> = 135;</div>
<div class="line"><span class="lineno">   72</span>    }</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> &gt;= -135 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> &lt; 0)</div>
<div class="line"><span class="lineno">   74</span>    {</div>
<div class="line"><span class="lineno">   75</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> = -135;</div>
<div class="line"><span class="lineno">   76</span>    }</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> &gt; 0)</div>
<div class="line"><span class="lineno">   79</span>    {</div>
<div class="line"><span class="lineno">   80</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> = <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> - 180;</div>
<div class="line"><span class="lineno">   81</span>    }</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> &lt; 0)</div>
<div class="line"><span class="lineno">   83</span>    {</div>
<div class="line"><span class="lineno">   84</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> = <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> + 180;</div>
<div class="line"><span class="lineno">   85</span>    }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a> &gt;= 45) <span class="comment">// -45 -&gt; 45</span></div>
<div class="line"><span class="lineno">   88</span>    {</div>
<div class="line"><span class="lineno">   89</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a> = 45;</div>
<div class="line"><span class="lineno">   90</span>    }</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a> &lt;= -45)</div>
<div class="line"><span class="lineno">   92</span>    {</div>
<div class="line"><span class="lineno">   93</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a> = -45;   </div>
<div class="line"><span class="lineno">   94</span>    }</div>
<div class="line"><span class="lineno">   95</span>    </div>
<div class="line"><span class="lineno">   96</span>    <span class="comment">//---------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">if</span> (main_pitch &lt;= 120 &amp;&amp; main_pitch &gt;= 0)  <span class="comment">// -120 -&gt; -180 = 180 -&gt; 120</span></div>
<div class="line"><span class="lineno">   98</span>    {</div>
<div class="line"><span class="lineno">   99</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> = 120;</div>
<div class="line"><span class="lineno">  100</span>    }</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> &gt;= -120 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> &lt; 0)</div>
<div class="line"><span class="lineno">  102</span>    {</div>
<div class="line"><span class="lineno">  103</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> = -120;</div>
<div class="line"><span class="lineno">  104</span>    }</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> &gt; 0)</div>
<div class="line"><span class="lineno">  107</span>    {</div>
<div class="line"><span class="lineno">  108</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> = <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> - 180;</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> &lt; 0)</div>
<div class="line"><span class="lineno">  111</span>    {</div>
<div class="line"><span class="lineno">  112</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> = <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> + 180;</div>
<div class="line"><span class="lineno">  113</span>    }</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a> &gt;= 60) <span class="comment">// -60 -&gt; 60</span></div>
<div class="line"><span class="lineno">  116</span>    {</div>
<div class="line"><span class="lineno">  117</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a> = 60;</div>
<div class="line"><span class="lineno">  118</span>    }</div>
<div class="line"><span class="lineno">  119</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a> &lt;= -60)</div>
<div class="line"><span class="lineno">  120</span>    {</div>
<div class="line"><span class="lineno">  121</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a> = -60;</div>
<div class="line"><span class="lineno">  122</span>    }</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f3bbacc575080a59fa96539d72922c2" name="a8f3bbacc575080a59fa96539d72922c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f3bbacc575080a59fa96539d72922c2">&#9670;&#160;</a></span>new_duty1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t new_duty1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Motor 2 Duty Cycle. </p>
<p>This function calculates the duty cycle to be sent to motor 2 of the robot. An intermediate duty is calculated to control the robot rotation within the ball. </p><dl class="section return"><dt>Returns</dt><dd>The duty cycle used to set the motor. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function should only be called after <a class="el" href="driverdriver_8cpp.html#a7efdda6986be0b9d55f9640910988484" title="Find Target Direction.">target_calc()</a> and <a class="el" href="driverdriver_8cpp.html#a2810ca19423c42f2de068a18ea1286b9" title="Find Orientation.">orientation_calc()</a> </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>It is important to select the correct motor/lead direction for this duty. </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00208">208</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>{</div>
<div class="line"><span class="lineno">  210</span>    uint8_t buf[20] = {0};</div>
<div class="line"><span class="lineno">  211</span>    <span class="comment">// Find magnitude of robot vector in line with the remote vector</span></div>
<div class="line"><span class="lineno">  212</span>    int32_t duty_intm1 = <a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> - <a class="code hl_variable" href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a>*cos((<span class="keywordtype">double</span>)((<a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> - <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a>)/1000));</div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">if</span> (duty_intm1 &lt; 0)</div>
<div class="line"><span class="lineno">  214</span>    {</div>
<div class="line"><span class="lineno">  215</span>        duty_intm1 = 0;</div>
<div class="line"><span class="lineno">  216</span>    }</div>
<div class="line"><span class="lineno">  217</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a> = sin((<span class="keywordtype">double</span>)<a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a>/1000)*duty_intm1/10;</div>
<div class="line"><span class="lineno">  218</span>    <span class="comment">// Create deadzone where motors can&#39;t overcome stiction.</span></div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">if</span> (duty_1 &lt;= 20 &amp;&amp; duty_1 &gt; 0)</div>
<div class="line"><span class="lineno">  220</span>    {</div>
<div class="line"><span class="lineno">  221</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a> = 0;</div>
<div class="line"><span class="lineno">  222</span>    }</div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a> &gt;= -20 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a> &lt; 0)</div>
<div class="line"><span class="lineno">  224</span>    {</div>
<div class="line"><span class="lineno">  225</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a> = 0;</div>
<div class="line"><span class="lineno">  226</span>    }</div>
<div class="line"><span class="lineno">  227</span>    sprintf((<span class="keywordtype">char</span>*)buf,<span class="stringliteral">&quot;Duty 1: %ld \r\n&quot;</span>, <a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a>);</div>
<div class="line"><span class="lineno">  228</span>    CDC_Transmit_FS((uint8_t*)buf, strlen((<span class="keywordtype">char</span>*)buf));</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a>;</div>
<div class="line"><span class="lineno">  231</span>}</div>
<div class="ttc" id="adriverdriver_8cpp_html_a1e35ed2812cd2e4f180eb3beee11295a"><div class="ttname"><a href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a></div><div class="ttdeci">int32_t main_target</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00028">driverdriver.cpp:28</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a48c1a1d6d869679bd9143e504cf27553"><div class="ttname"><a href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a></div><div class="ttdeci">int32_t m_mag</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00025">driverdriver.cpp:25</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a8f95409d75c32626bc2112bb260a9bf2"><div class="ttname"><a href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a></div><div class="ttdeci">int32_t true_target</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00027">driverdriver.cpp:27</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_a9172e88555fa5eea9e19151977fdfc55"><div class="ttname"><a href="driverdriver_8cpp.html#a9172e88555fa5eea9e19151977fdfc55">duty_1</a></div><div class="ttdeci">int32_t duty_1</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00031">driverdriver.cpp:31</a></div></div>
<div class="ttc" id="adriverdriver_8cpp_html_aa1017fa931d4f319cb2b952ef112b295"><div class="ttname"><a href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a></div><div class="ttdeci">int32_t r_mag</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00026">driverdriver.cpp:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa35178cc32e6ee25c05ba33161c91893" name="aa35178cc32e6ee25c05ba33161c91893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa35178cc32e6ee25c05ba33161c91893">&#9670;&#160;</a></span>new_duty2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t new_duty2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Motor 3 Duty Cycle. </p>
<p>This function calculates the duty cycle to be sent to motor 3 of the robot. An intermediate duty is calculated to control the robot rotation within the ball. </p><dl class="section return"><dt>Returns</dt><dd>The duty cycle used to set the motor. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function should only be called after <a class="el" href="driverdriver_8cpp.html#a7efdda6986be0b9d55f9640910988484" title="Find Target Direction.">target_calc()</a> and <a class="el" href="driverdriver_8cpp.html#a2810ca19423c42f2de068a18ea1286b9" title="Find Orientation.">orientation_calc()</a> </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>It is important to select the correct motor/lead direction for this duty. </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00240">240</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  241</span>{</div>
<div class="line"><span class="lineno">  242</span>    uint8_t buf2[20] = {0};</div>
<div class="line"><span class="lineno">  243</span>    int32_t duty_intm2 = <a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> - <a class="code hl_variable" href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a>*cos((<span class="keywordtype">double</span>)((<a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> - <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a>)/1000));</div>
<div class="line"><span class="lineno">  244</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a> = sin(((<span class="keywordtype">double</span>)<a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a>/1000)-2.0944)*duty_intm2/10; <span class="comment">// Subtract pi/3 for 3 wheels</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">if</span> (duty_intm2 &lt; 0)</div>
<div class="line"><span class="lineno">  246</span>    {</div>
<div class="line"><span class="lineno">  247</span>        duty_intm2 = 0;</div>
<div class="line"><span class="lineno">  248</span>    }</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">if</span> (duty_2 &lt;= 20 &amp;&amp; duty_2 &gt; 0)</div>
<div class="line"><span class="lineno">  250</span>    {</div>
<div class="line"><span class="lineno">  251</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a> = 0;</div>
<div class="line"><span class="lineno">  252</span>    }</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a> &gt;= -20 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a> &lt; 0)</div>
<div class="line"><span class="lineno">  254</span>    {</div>
<div class="line"><span class="lineno">  255</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a> = 0;</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span>    sprintf((<span class="keywordtype">char</span>*)buf2,<span class="stringliteral">&quot;Duty 2: %ld \r\n&quot;</span>, <a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a>);</div>
<div class="line"><span class="lineno">  258</span>    <span class="comment">//CDC_Transmit_FS((uint8_t*)buf2, strlen((char*)buf2));</span></div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a>;</div>
<div class="line"><span class="lineno">  261</span>}</div>
<div class="ttc" id="adriverdriver_8cpp_html_a1406b1a1fb29c7667d533030bfd47166"><div class="ttname"><a href="driverdriver_8cpp.html#a1406b1a1fb29c7667d533030bfd47166">duty_2</a></div><div class="ttdeci">int32_t duty_2</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00032">driverdriver.cpp:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="accf9d4b4c9ebb4fe9cd5f67e4b02bc82" name="accf9d4b4c9ebb4fe9cd5f67e4b02bc82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accf9d4b4c9ebb4fe9cd5f67e4b02bc82">&#9670;&#160;</a></span>new_duty3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t new_duty3 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Motor 4 Duty Cycle. </p>
<p>This function calculates the duty cycle to be sent to motor 4 of the robot. An intermediate duty is calculated to control the robot rotation within the ball. </p><dl class="section return"><dt>Returns</dt><dd>The duty cycle used to set the motor. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function should only be called after <a class="el" href="driverdriver_8cpp.html#a7efdda6986be0b9d55f9640910988484" title="Find Target Direction.">target_calc()</a> and <a class="el" href="driverdriver_8cpp.html#a2810ca19423c42f2de068a18ea1286b9" title="Find Orientation.">orientation_calc()</a> </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>It is important to select the correct motor/lead direction for this duty. </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00270">270</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  271</span>{</div>
<div class="line"><span class="lineno">  272</span>    uint8_t buf3[20] = {0};</div>
<div class="line"><span class="lineno">  273</span>    int32_t duty_intm3 = <a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> - <a class="code hl_variable" href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a>*cos((<span class="keywordtype">double</span>)((<a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> - <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a>)/1000));</div>
<div class="line"><span class="lineno">  274</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a> = sin(((<span class="keywordtype">double</span>)<a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a>)/1000-4.1888)*duty_intm3/10;</div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">if</span> (duty_intm3 &lt; 0)</div>
<div class="line"><span class="lineno">  276</span>    {</div>
<div class="line"><span class="lineno">  277</span>        duty_intm3 = 0;</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">if</span> (duty_3 &lt;= 20 &amp;&amp; duty_3 &gt; 0)</div>
<div class="line"><span class="lineno">  280</span>    {</div>
<div class="line"><span class="lineno">  281</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a> = 0;</div>
<div class="line"><span class="lineno">  282</span>    }</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a> &gt;= -20 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a> &lt; 0)</div>
<div class="line"><span class="lineno">  284</span>    {</div>
<div class="line"><span class="lineno">  285</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a> = 0;</div>
<div class="line"><span class="lineno">  286</span>    }</div>
<div class="line"><span class="lineno">  287</span>    sprintf((<span class="keywordtype">char</span>*)buf3,<span class="stringliteral">&quot;Duty 3: %ld \r\n\n&quot;</span>, <a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a>);</div>
<div class="line"><span class="lineno">  288</span>    <span class="comment">//CDC_Transmit_FS((uint8_t*)buf3, strlen((char*)buf3));</span></div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a>;</div>
<div class="line"><span class="lineno">  291</span>}</div>
<div class="ttc" id="adriverdriver_8cpp_html_a8d025253191519882c35b07d4fd9f371"><div class="ttname"><a href="driverdriver_8cpp.html#a8d025253191519882c35b07d4fd9f371">duty_3</a></div><div class="ttdeci">int32_t duty_3</div><div class="ttdef"><b>Definition</b> <a href="driverdriver_8cpp_source.html#l00033">driverdriver.cpp:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2810ca19423c42f2de068a18ea1286b9" name="a2810ca19423c42f2de068a18ea1286b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2810ca19423c42f2de068a18ea1286b9">&#9670;&#160;</a></span>orientation_calc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void orientation_calc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Orientation. </p>
<p>This function calculates the relative direction of the double angle tilt of the robot using the robot IMU. This is done through the use of the atan() funciton with roll and pitch measurements. It is used to help control the robot tilt during operation. </p><dl class="section note"><dt>Note</dt><dd>This function should only be called after <a class="el" href="driverdriver_8cpp.html#a7efdda6986be0b9d55f9640910988484" title="Find Target Direction.">target_calc()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00173">173</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>{</div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a> != 0 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> == 0)</div>
<div class="line"><span class="lineno">  176</span>    {</div>
<div class="line"><span class="lineno">  177</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> = 1.5708 * 1000;</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  180</span>    {</div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> = atan((<span class="keywordtype">double</span>)(<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a>/<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a>)) * 1000;</div>
<div class="line"><span class="lineno">  182</span>    }</div>
<div class="line"><span class="lineno">  183</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a> &lt; 0)</div>
<div class="line"><span class="lineno">  184</span>    {</div>
<div class="line"><span class="lineno">  185</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> = (atan((<span class="keywordtype">double</span>)(<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a>/<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a>)) + 3.14159) * 1000;</div>
<div class="line"><span class="lineno">  186</span>    }</div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  188</span>    {</div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> = 0;</div>
<div class="line"><span class="lineno">  190</span>    }</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> = <a class="code hl_variable" href="driverdriver_8cpp.html#a1e35ed2812cd2e4f180eb3beee11295a">main_target</a> - 45*3.14159*1000/180;</div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a> = sqrt(<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a>*<a class="code hl_variable" href="driverdriver_8cpp.html#a322b51758b86887c294daeba4e3eb9bd">main_pitch</a>+<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a>*<a class="code hl_variable" href="driverdriver_8cpp.html#a3e5a7dc3541a71e8a32c80359ce1eaaf">main_roll</a>)/60 * 1000;</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a> &gt;= 1000)</div>
<div class="line"><span class="lineno">  195</span>    {</div>
<div class="line"><span class="lineno">  196</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a48c1a1d6d869679bd9143e504cf27553">m_mag</a> = 1000;</div>
<div class="line"><span class="lineno">  197</span>    }</div>
<div class="line"><span class="lineno">  198</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7efdda6986be0b9d55f9640910988484" name="a7efdda6986be0b9d55f9640910988484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7efdda6986be0b9d55f9640910988484">&#9670;&#160;</a></span>target_calc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void target_calc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Target Direction. </p>
<p>This function calculates the relative direction of the double angle tilt of the robot using the remote IMU. This is done through the use of the atan() funciton with roll and pitch measurements. </p><dl class="section note"><dt>Note</dt><dd>This function should only be called after <a class="el" href="driverdriver_8cpp.html#a97ee83d41e48f22c4d2070a81769f655" title="Saturate IMU Data.">data_saturation()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="driverdriver_8cpp_source.html#l00132">132</a> of file <a class="el" href="driverdriver_8cpp_source.html">driverdriver.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>{</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a> != 0 &amp;&amp; <a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> == 0)</div>
<div class="line"><span class="lineno">  135</span>    {</div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a> = 1.5708 * 1000; <span class="comment">// Handles divide by zero case</span></div>
<div class="line"><span class="lineno">  137</span>    }</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  139</span>    {</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a> = atan((<span class="keywordtype">double</span>)(<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a>/<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a>)) * 1000; <span class="comment">// Multiplied by 1000 to avoid float</span></div>
<div class="line"><span class="lineno">  141</span>    }</div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a> &lt; 0)</div>
<div class="line"><span class="lineno">  143</span>    {</div>
<div class="line"><span class="lineno">  144</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a> = (atan((<span class="keywordtype">double</span>)(<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a>/<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a>)) + 3.14159) * 1000;</div>
<div class="line"><span class="lineno">  145</span>    }</div>
<div class="line"><span class="lineno">  146</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  147</span>    {</div>
<div class="line"><span class="lineno">  148</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a> = 0;</div>
<div class="line"><span class="lineno">  149</span>    }</div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// Compensating for Robot heading difference from true North</span></div>
<div class="line"><span class="lineno">  151</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a> = <a class="code hl_variable" href="driverdriver_8cpp.html#a8f95409d75c32626bc2112bb260a9bf2">true_target</a> - ( <a class="code hl_variable" href="driverdriver_8cpp.html#a6bd9481a550724104f5bc5aae6baa1cf">remote_yaw</a> + <a class="code hl_variable" href="driverdriver_8cpp.html#a48bc73478db109996ea376fe8ca31746">main_yaw</a> + 90 )*3.14159*1000/180;</div>
<div class="line"><span class="lineno">  152</span>    <span class="comment">// |v| = √(x^2 + y^2) Divided by an expected maximum to achieve unit length</span></div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> = sqrt(<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a>*<a class="code hl_variable" href="driverdriver_8cpp.html#a8b9e3b3b7cdeb864b40a399db6ea0950">remote_pitch</a>+<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a>*<a class="code hl_variable" href="driverdriver_8cpp.html#ac7944dc6f211712611bc3f2ccd3ed0d9">remote_roll</a>)/45 * 1000;</div>
<div class="line"><span class="lineno">  154</span>    <span class="comment">// Due to the current square inputs, rounding out the edges</span></div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> &gt;= 1000)</div>
<div class="line"><span class="lineno">  156</span>    {</div>
<div class="line"><span class="lineno">  157</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> = 1000;</div>
<div class="line"><span class="lineno">  158</span>    }</div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">// Provide a large &quot;neutral zone&quot; for the user with zero magnitude.</span></div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> &lt;= 100)</div>
<div class="line"><span class="lineno">  161</span>    {</div>
<div class="line"><span class="lineno">  162</span>        <a class="code hl_variable" href="driverdriver_8cpp.html#aa1017fa931d4f319cb2b952ef112b295">r_mag</a> = 0;</div>
<div class="line"><span class="lineno">  163</span>    }</div>
<div class="line"><span class="lineno">  164</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f93dfce691d792349f1c14ede440e2e6.html">Inc</a></li><li class="navelem"><a class="el" href="driverdriver_8h.html">driverdriver.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
